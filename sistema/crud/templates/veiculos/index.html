{% extends "base.html" %}

{% block titulo %} lista de veiculos {% endblock %} 

{% block conteudo %} 

<div class="card">
    <div class="card-header">
        <a name="" id="" class="btn btn-dark" href="{% url 'cadastro' %}" role="button">Cadastrar um novo veículo</a>
    </div>


    <div class="card-body">
        <h4 class="card-title">Veículos</h4>

        <div class="table-responsive">
            <table class="table table-primary">
                <thead>
                    <tr>
                        <th scope="col">ID</th>
                        <th scope="col">Placa</th>
                        <th scope="col">Marca</th>
                        <th scope="col">Veículo</th>
                        <th scope="col">Km_Troca_Oleo</th>
                        <th scope="col">Imagem do Veículo</th>
                        <th scope="col">Ferramentas</th>
                    </tr>
                </thead>
                <tbody>

                    {% for veiculo in veiculos %}
                    <tr class="">
                        <td> {{ veiculo.id }} </td>
                        <td> {{ veiculo.placa }} </td>
                        <td> {{ veiculo.marca }} </td>
                        <td> {{ veiculo.veiculo }} </td>
                        <td> {{ veiculo.km }} </td>
                        <td>
                        <img src="{{ veiculo.imagem.url}}" height="100" >    

                             
                           
                        </img>
                        </td>
                        <td> 
                            <a name="" id="" class="btn btn-primary" href="{% url 'visualizar' veiculo.id %}" role="button">Visualizar</a>
                            |
                            <a name="" id="" class="btn btn-warning" href=" {% url 'editar' veiculo.id %} " role="button">Editar</a>
                            |
                            <a name="" id="" class="btn btn-danger"  href="#" data-bs-toggle="modal" data-bs-target="#modal-{{ veiculo.id }}" role="button">Excluir</a>
                        </td>
                    </tr>

                    <div class="modal fade" id="modal-{{ veiculo.id }}" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false" role="dialog" aria-labelledby="modalTitleId" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-sm" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="modalTitleId">Excluir item selecionado?</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    O item selecionado ser apagado PERMANENTEMENTE. Você não podera desfazer essa ação.
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                                    <a name="" id="" class="btn btn-danger"  href="{% url 'excluir' veiculo.id %}" role="button">Excluir</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    {% endfor %}

                    

                </tbody>
            </table>
        </div>
        
    </div>

<!-- data-bs-toggle="modal" data-bs-target="#modalId" -->

<!-- Modal -->
<div class="modal fade" id="modalId" tabindex="-1" role="dialog" aria-labelledby="modalTitleId" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
                <div class="modal-header">
                        <h5 class="modal-title" id="modalTitleId">Modal title</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
            <div class="modal-body">
                <div class="container-fluid">
                    Add rows here
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <a name="" id="" class="btn btn-danger"  href="#" role="button">Excluir</a>
            </div>
        </div>
    </div>
</div>

<script>
    var modalId = document.getElementById('modalId');

    modalId.addEventListener('show.bs.modal', function (event) {
          // Button that triggered the modal
          let button = event.relatedTarget;
          // Extract info from data-bs-* attributes
          let recipient = button.getAttribute('data-bs-whatever');

        // Use above variables to manipulate the DOM
    });
</script>


    
</div>

<!-- Modal Body -->
<!-- if you want to close by clicking outside the modal, delete the last endpoint:data-bs-backdrop and data-bs-keyboard -->



<!-- Optional: Place to the bottom of scripts -->
<script>
    const myModal = new bootstrap.Modal(document.getElementById('modalId'), options)

</script>

{% endblock %}
